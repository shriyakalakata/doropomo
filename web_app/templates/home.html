{% extends 'base.html' %}

{% block container %}

<div class="images-container">
  <div class="doropomo">
    <img src="/static/images/doropomo.png" alt="doropomo">
  </div>
  <div class="pomodoro-image">
    
    <img class="tomato-image" src="/static/images/tomato.png" alt="tomato.png">
    <!--<img class="pomodoro-pasta-image" src="/static/images/pomodoro-pasta.png" alt="pomodoro-pasta.png">-->
    <!--<img class="stirring-pasta-image" src="/static/images/stirring-pasta.png" alt="stirring-pasta.png">-->
   
  </div>
  <p class="time" id="timer">25:00</p>
  <button class="reset-button">
    <img class="reset-image" src="/static/images/reset.svg" alt="reset.svg">
  </button>
  <button class="start-button">START</button>
  <button class="pause-button">PAUSE</button>
</div>

<!-- countdown timer -->
<script>
  const TIME_LIMIT = 25 * 60;

  let timeLimitInSeconds = TIME_LIMIT;
  let timerElement = document.getElementById('timer');

  let timerInterval;

  // get the buttons and the images
  let startButton = document.querySelector('.start-button');
  let pauseButton = document.querySelector('.pause-button');

  // set initial display states of the buttons and the images
  startButton.style.display = "initial";
  pauseButton.style.display = "none";
  
  // add event listeners to buttons 
  startButton.addEventListener('click', startTimer);
  pauseButton.addEventListener('click', pauseTimer);

  // update the countdown timer every second
  function startTimer() {
    timerInterval = setInterval(updateTimer, 1000);
    startButton.style.display = "none";
    pauseButton.style.display = "initial";
  }

  function pauseTimer() {
    startButton.style.display = "initial";
    pauseButton.style.display = "none";
    clearInterval(timerInterval);
  }

  // update countdown
  function updateTimer() {
    timeLimitInSeconds--;
    let minutes = Math.floor(timeLimitInSeconds / 60);
    let seconds = timeLimitInSeconds % 60;
    if (timeLimitInSeconds < 0) {
      timerElement.textContent = '00:00';
      clearInterval(timerInterval);
      return;
    }
    if (minutes < 10) {
      minutes = '0' + minutes;
    }
    if (seconds < 10) {
      seconds = '0' + seconds;
    }
    timerElement.textContent = minutes + ':' + seconds;
  }

</script>

{% endblock %}
